<html>
<head>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">


<div class="row" style="margin: 100px;">
    <div class="col-md-4 col-md-offset-4">
     <h3>Order</h3>
        <form method="POST" action="/neworder" id="orderform">

<input type="text" class="form-control"  required id="ordername" name="ordername"><br>

<button type="submit" class="btn btn-primary">Submit</button>

        </form>
        

    </div>





    

<div class="col-md-4">

    <ol id="orders">

    </ol>

</div>


</div>


</head>

<body>

    <!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>


function getData()
    {
 

        $.ajax({
    type: "POST",
    url: "/getorder",
    dataType: "json",
    success: function(result){

        let variable="";
        for(let i=0;i<result.length;i++)
        {
            variable+=`<li>Order ID- ${result[i].idorder} Ordername - ${result[i].ordername}</li>`
        }
        
        $("#orders").html(variable);


        
    }
});



    }


$(document).ready(function(){



 
getData();

})




function insertData(ordername)
    {
 

        $.ajax({
    type: "POST",
    url: "/neworder",
    data:{ordername:ordername},
    dataType: "json",
    success: function(result){
console.log(result);
        getData();
        
    }
});



    }



$("#orderform").submit(function(e){

e.preventDefault();

var values = $("#ordername").val();


insertData(values);

})


</script>



</body>

</html>